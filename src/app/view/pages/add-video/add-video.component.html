<div class="add-video-container">
  <form [formGroup]="videoForm" (ngSubmit)="onSubmit()" class="p-4 border rounded bg-white shadow-sm">
    <h3 class="mb-4 text-center">üìΩÔ∏è Ajouter une nouvelle vid√©o</h3>

    <!-- Title -->
    <div class="mb-3">
      <label for="title" class="form-label">Titre de la vid√©o *</label>
      <input
        id="title"
        type="text"
        formControlName="title"
        class="form-control"
        placeholder="Ex: Principes fondamentaux de l‚ÄôABA"
      />
      <div class="text-danger small mt-1" *ngIf="videoForm.get('title')?.touched && videoForm.get('title')?.invalid">
        Le titre est requis.
      </div>
    </div>

    <!-- Description -->
    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea id="description" formControlName="description" class="form-control" rows="3"></textarea>
    </div>

    <!-- Resource Categories (IDs) -->
    <div class="mb-3">
      <label class="form-label">Cat√©gorie(s)</label>
      <ng-select
        [items]="allCategories"
        bindLabel="name"
        bindValue="id"
        [multiple]="true"
        formControlName="categoryIds"
        placeholder="Choisir les cat√©gories"
      ></ng-select>
    </div>

    <!-- Duration -->
    <div class="mb-3">
      <label for="duration" class="form-label">Dur√©e (en minutes)</label>
      <input id="duration" type="number" formControlName="duration" class="form-control" min="0" />
    </div>

    <!-- URL ONLY -->
    <div class="mb-3">
      <label for="url" class="form-label">URL de la vid√©o *</label>
      <input
        id="url"
        type="url"
        formControlName="url"
        class="form-control"
        placeholder="https://youtube.com/... ou https://vimeo.com/..."
      />
      <div class="text-danger small mt-1" *ngIf="videoForm.get('url')?.touched && videoForm.get('url')?.invalid">
        Saisissez une URL valide commen√ßant par http(s)://
      </div>
      <small class="text-muted d-block mt-1">La vid√©o sera lue depuis cette URL (pas d‚Äôupload).</small>
    </div>

    <!-- Optional thumbnail URL -->
    <div class="mb-3">
      <label for="thumbnailUrl" class="form-label">Miniature (URL, optionnel)</label>
      <input
        id="thumbnailUrl"
        type="url"
        formControlName="thumbnailUrl"
        class="form-control"
        placeholder="https://exemple.com/thumbnail.jpg"
      />
      <img
        *ngIf="videoForm.value.thumbnailUrl"
        [src]="videoForm.value.thumbnailUrl"
        alt="Pr√©visualisation miniature"
        class="thumbnail-preview mt-2"
        style="max-width: 100%; border-radius: 4px;"
      />
    </div>

    <!-- Premium -->
    <div class="form-check mt-3">
      <input type="checkbox" class="form-check-input" formControlName="isPremium" id="premiumCheck" />
      <label class="form-check-label" for="premiumCheck">Marquer comme contenu Premium</label>
    </div>

    <!-- Actions -->
    <div class="mt-4 d-flex gap-3 justify-content-end">
      <button type="submit" class="btn btn-primary" [disabled]="submitting || videoForm.invalid">
        {{ submitting ? 'Envoi en cours...' : 'Enregistrer' }}
      </button>
      <button type="button" class="btn btn-outline-secondary" (click)="router.navigateByUrl('/videos')">
        Annuler
      </button>
    </div>
  </form>
</div>
