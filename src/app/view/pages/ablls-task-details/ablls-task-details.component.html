
   
<a class="btn btn-primary m-3" routerLink="/ablls">Retour aux taches</a>
    

<div class="container py-4 text-center" *ngIf="task; else loading">
    
  <h2 class="mb-4">T√¢che {{ task.code }} : {{ task.title }}</h2>

  <!-- üé• Vid√©o -->
  <div class="d-flex justify-content-center mb-4">
    <!-- Si Lien externe -->
    <iframe
      *ngIf="task.explanationVideoUrl"
      width="560"
      height="315"
      [src]="getSafeUrl(task.explanationVideoUrl!)"
      frameborder="0"
      allowfullscreen
    ></iframe>

    <!-- Si Fichier local -->
    <video
      *ngIf="!task.explanationUseExternal && task.explanationVideoPath"
      width="560"
      height="315"
      controls
    >
      <source [src]="baseUrl + task.explanationVideoPath!" type="video/mp4" />
      Votre navigateur ne supporte pas la lecture de la vid√©o.
    </video>
  </div>

  <!-- üîò Crit√®res -->
  <div *ngIf="task.evaluationCriterias?.length" class="d-flex justify-content-center flex-wrap gap-2 mt-3">
    <a
      *ngFor="let crit of task.evaluationCriterias; let i = index"
      [routerLink]="['/evaluation-criteria', crit.id]"
      class="btn btn-primary"
    >
      Crit√®re {{ i + 1 }}
    </a>
  </div>
</div>

<ng-template #loading>
  <div class="text-center mt-5">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-3">Chargement de la t√¢che...</p>
  </div>
</ng-template>
