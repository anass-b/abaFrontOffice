<div class="container py-4">
  <form
    [formGroup]="documentForm"
    (ngSubmit)="onSubmit()"
    class="p-4 border rounded bg-white shadow-sm mx-auto"
    style="max-width: 600px;"
  >
    <h3 class="mb-4 text-center text-primary">ðŸ“„ Ajouter un nouveau document</h3>

    <!-- Titre -->
    <div class="mb-3">
      <label for="title" class="form-label">Titre du document *</label>
      <input
        id="title"
        formControlName="title"
        type="text"
        class="form-control"
        placeholder="Ex. Grille dâ€™Ã©valuation pour enfants autistes"
      />
      <div class="text-danger small mt-1" *ngIf="documentForm.get('title')?.touched && documentForm.get('title')?.invalid">
        Le titre est requis.
      </div>
    </div>

    <!-- Description -->
    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea
        id="description"
        formControlName="description"
        class="form-control"
        rows="4"
        placeholder="DÃ©crivez le document..."
      ></textarea>
    </div>

    <!-- CatÃ©gories (ResourceCategory IDs) -->
    <div class="mb-3">
      <label class="form-label">CatÃ©gorie(s)</label>
      <ng-select
        [items]="allCategories"
        bindLabel="name"
        bindValue="id"
        [multiple]="true"
        formControlName="categoryIds"
        placeholder="Choisir les catÃ©gories"
        class="w-100"
      ></ng-select>
    </div>

    <!-- Fichier (upload local) -->
    <div class="mb-3">
      <label for="file" class="form-label">Fichier *</label>
      <input
        id="file"
        type="file"
        class="form-control"
        (change)="onFileSelected($event)"
        accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.jpg,.jpeg,.png"
      />
      <div class="text-muted mt-1">
        Formats acceptÃ©s : pdf, doc(x), xls(x), ppt(x), txt, jpg, png â€” max 50&nbsp;MB.
      </div>
      <div class="text-danger small mt-1" *ngIf="documentForm.get('file')?.touched && documentForm.get('file')?.invalid">
        Le fichier est requis.
      </div>
    </div>

    <!-- Premium -->
    <div class="form-check mb-4">
      <input type="checkbox" class="form-check-input" formControlName="isPremium" id="premiumCheck" />
      <label class="form-check-label" for="premiumCheck">Marquer comme contenu Premium</label>
    </div>

    <!-- Boutons -->
    <div class="d-flex justify-content-end gap-3">
      <button type="submit" class="btn btn-primary" [disabled]="uploading || documentForm.invalid">
        {{ uploading ? 'Envoi en cours...' : ' Enregistrer' }}
      </button>
      <button type="button" class="btn btn-outline-secondary" (click)="router.navigateByUrl('/documents')">
        Annuler
      </button>
    </div>
  </form>
</div>
