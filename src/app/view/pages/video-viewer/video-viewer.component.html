<div class="video-viewer container py-4" *ngIf="video">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="mb-0">{{ video.title }}</h3>
    <button class="btn btn-outline-secondary" (click)="goBack()">← Retour</button>
  </div>

  <p class="text-muted mb-3">
    Catégories :
    <strong>{{ (video.categories || []).join(', ') }}</strong>
    · Durée : <strong>{{ video.duration }} min</strong>
  </p>

  <div class="video-wrapper mb-4 text-center">
    <!-- External player (iframe) -->
    <ng-container *ngIf="video.useExternal">
      <iframe
        *ngIf="playerSafeUrl"
        [src]="playerSafeUrl"
        style="width:100%;height:80vh;border:0"
        allow="autoplay; encrypted-media; fullscreen"
      ></iframe>
    </ng-container>

    <!-- Fallback: local/proxy blob playback (kept for completeness) -->
    <ng-container *ngIf="!video.useExternal && videoBlobUrl">
      <video
        width="800"
        height="450"
        controls
        controlsList="nodownload"
        autoplay
        [src]="videoBlobUrl"
        (contextmenu)="$event.preventDefault()"
      ></video>
    </ng-container>
  </div>
</div>
