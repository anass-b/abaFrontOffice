<!-- üåí Barre de navigation mauve fonc√© -->
<nav class="navbar navbar-expand-lg" style="background-color: #4b2c5e;">
  <div class="container-fluid px-4 py-2 d-flex justify-content-between align-items-center">
    <span class="navbar-brand mb-0 h5 text-white">
      {{ crit?.task?.code }}{{ indexInTask ? '.' + indexInTask : '' }} 
      
    </span>
    <a
      class="btn btn-outline-light rounded-pill"
      [routerLink]="['/ablls-task', crit?.abllsTaskId]"
    >
      ‚Üê Retour √† la t√¢che
    </a>
  </div>
</nav>

<!-- üîΩ Contenu principal -->
<div class="container py-4 text-center" *ngIf="crit">
  <h2 class="mb-4">{{ crit?.label }}</h2>
  <!-- üé• Vid√©o de d√©monstration -->
  <div class="d-flex justify-content-center mb-4">
    <iframe
      *ngIf="crit.useExternalDemonstrationVideo && crit.demonstrationVideoUrl"
      width="560"
      height="315"
      [src]="getSafeUrl(crit.demonstrationVideoUrl!)"
      frameborder="0"
      allowfullscreen
    ></iframe>

    <video
      *ngIf="!crit.useExternalDemonstrationVideo && crit.demonstrationVideoPath"
      width="560"
      height="315"
      controls
    >
      <source [src]="baseUrl + crit.demonstrationVideoPath!" type="video/mp4" />
      Votre navigateur ne supporte pas la lecture de la vid√©o.
    </video>
  </div>

  <!-- üìã D√©tails techniques -->
  <div class="bg-light rounded-3 p-4 text-start mx-auto mb-4" style="max-width: 700px;">
    <h5 class="fw-semibold mb-3">D√©tails techniques</h5>
    <p><strong>Type de guidance :</strong> {{ crit.guidanceType || 'Non sp√©cifi√©' }}</p>
    <p><strong>Instruction :</strong> {{ crit.consigne || 'Non fournie' }}</p>
    <p><strong>R√©ponse attendue :</strong> {{ crit.expectedResponse || 'Non pr√©cis√©e' }}</p>
  </div>

  <!-- üß© Mat√©riel associ√© -->
  <div *ngIf="materials.length" class="bg-light rounded-3 p-4 text-start mx-auto" style="max-width: 900px;">
    <h5 class="fw-semibold text-center mb-4">Mat√©riel associ√©</h5>
    <div class="d-flex justify-content-center flex-wrap gap-4">
      <div *ngFor="let mat of materials" class="card shadow-sm border-0" style="width: 200px;">
        <div class="card-body text-center">
          <h6 class="card-title">{{ mat.name }}</h6>
          <img
            *ngIf="mat.fileUrl"
            [src]="baseUrl + mat.fileUrl"
            class="img-fluid rounded"
            style="max-height: 100px;"
          />
          <p *ngIf="!mat.fileUrl" class="text-muted small mt-2">Aucune image</p>
        </div>
      </div>
    </div>
  </div>
</div>
